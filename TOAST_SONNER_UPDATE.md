# Toast ç»„ä»¶æ›´æ–° - ä½¿ç”¨ Sonner

## æ›´æ–°æ¦‚è¿°

å°† Toast æç¤ºç»„ä»¶ä» shadcn/ui çš„å®ç°æ›¿æ¢ä¸º Sonnerï¼Œæä¾›æ›´ç°ä»£åŒ–ã€æ›´ç¾è§‚çš„æç¤ºæ ·å¼ï¼ŒåŒæ—¶ä¿æŒä¸å½“å‰å·¥å…·çš„è®¾è®¡é£æ ¼ä¸€è‡´ã€‚

## æ›´æ–°æ—¶é—´

2025å¹´11æœˆ6æ—¥

---

## ä¸ºä»€ä¹ˆé€‰æ‹© Sonner

### Sonner çš„ä¼˜åŠ¿

1. **ç°ä»£åŒ–è®¾è®¡**
   - ç®€æ´ä¼˜é›…çš„å¤–è§‚
   - æµç•…çš„åŠ¨ç”»æ•ˆæœ
   - ç¬¦åˆç°ä»£ UI è®¾è®¡è¶‹åŠ¿

2. **æ˜“ç”¨æ€§**
   - API ç®€å•ç›´è§‚
   - æ— éœ€é…ç½® Provider
   - æ”¯æŒå¤šç§æç¤ºç±»å‹

3. **åŠŸèƒ½ä¸°å¯Œ**
   - è‡ªåŠ¨å †å ç®¡ç†
   - å¯è‡ªå®šä¹‰ä½ç½®
   - æ”¯æŒ Promise çŠ¶æ€
   - å“åº”å¼è®¾è®¡

4. **æ€§èƒ½ä¼˜ç§€**
   - è½»é‡çº§å®ç°
   - ä¼˜åŒ–çš„æ¸²æŸ“æ€§èƒ½
   - æ— é¢å¤–ä¾èµ–

---

## å®ç°æ›´æ”¹

### 1. ä¿®æ”¹ app/design/page.tsx

#### å¯¼å…¥æ›´æ”¹

```tsx
// ä¿®æ”¹å‰
import { useToast } from "@/hooks/use-toast"

export default function DesignPage() {
  const { toast } = useToast()
  // ...
}

// ä¿®æ”¹å
import { toast } from "sonner"

export default function DesignPage() {
  // ç›´æ¥ä½¿ç”¨ toastï¼Œæ— éœ€ hook
  // ...
}
```

#### ä½¿ç”¨æ–¹å¼æ›´æ”¹

```tsx
// ä¿®æ”¹å‰
toast({
  title: "è¯·å…ˆç¡®å®šçª—å‹",
  description: "è¯·åœ¨æ­¥éª¤2é€‰æ‹©ä¸€ä¸ªçª—å‹åå†ç»§ç»­",
  variant: "destructive",
})

// ä¿®æ”¹å
toast.error("è¯·å…ˆç¡®å®šçª—å‹", {
  description: "è¯·åœ¨æ­¥éª¤2é€‰æ‹©ä¸€ä¸ªçª—å‹åå†ç»§ç»­",
})
```

---

### 2. ä¿®æ”¹ app/layout.tsx

```tsx
// ä¿®æ”¹å‰
import { Toaster } from '@/components/ui/toaster'

// ä¿®æ”¹å
import { Toaster } from '@/components/ui/sonner'
```

**ä¿æŒä¸å˜**ï¼šåœ¨å¸ƒå±€ä¸­çš„ä½¿ç”¨æ–¹å¼ç›¸åŒ
```tsx
<ThemeProvider>
  {children}
  <Toaster />
  <Analytics />
</ThemeProvider>
```

---

### 3. ä¼˜åŒ– components/ui/sonner.tsx

#### é…ç½®ä¼˜åŒ–

```tsx
<Sonner
  theme={theme as ToasterProps['theme']}
  className="toaster group"
  position="top-center"  // è®¾ç½®é»˜è®¤ä½ç½®ä¸ºé¡¶éƒ¨å±…ä¸­
  toastOptions={{
    classNames: {
      toast: 'group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg',
      description: 'group-[.toast]:text-muted-foreground',
      actionButton: 'group-[.toast]:bg-primary group-[.toast]:text-primary-foreground',
      cancelButton: 'group-[.toast]:bg-muted group-[.toast]:text-muted-foreground',
      error: 'group-[.toast]:bg-destructive group-[.toast]:text-destructive-foreground group-[.toast]:border-destructive',
      success: 'group-[.toast]:bg-green-500 group-[.toast]:text-white',
      warning: 'group-[.toast]:bg-yellow-500 group-[.toast]:text-white',
      info: 'group-[.toast]:bg-blue-500 group-[.toast]:text-white',
    },
  }}
/>
```

---

## Sonner API ä½¿ç”¨æŒ‡å—

### åŸºæœ¬ç”¨æ³•

#### 1. æ™®é€šæç¤º
```tsx
toast("è¿™æ˜¯ä¸€æ¡æ™®é€šæ¶ˆæ¯")
```

#### 2. æˆåŠŸæç¤º
```tsx
toast.success("æ“ä½œæˆåŠŸ")
```

#### 3. é”™è¯¯æç¤º
```tsx
toast.error("æ“ä½œå¤±è´¥")
```

#### 4. è­¦å‘Šæç¤º
```tsx
toast.warning("è¯·æ³¨æ„")
```

#### 5. ä¿¡æ¯æç¤º
```tsx
toast.info("æ¸©é¦¨æç¤º")
```

---

### é«˜çº§ç”¨æ³•

#### å¸¦æè¿°çš„æç¤º
```tsx
toast.error("è¯·å…ˆç¡®å®šçª—å‹", {
  description: "è¯·åœ¨æ­¥éª¤2é€‰æ‹©ä¸€ä¸ªçª—å‹åå†ç»§ç»­",
})
```

#### è‡ªå®šä¹‰æŒç»­æ—¶é—´
```tsx
toast.success("ä¿å­˜æˆåŠŸ", {
  duration: 5000, // 5ç§’åè‡ªåŠ¨æ¶ˆå¤±
})
```

#### å¸¦æ“ä½œæŒ‰é’®
```tsx
toast("ç¡®è®¤åˆ é™¤å—ï¼Ÿ", {
  action: {
    label: "ç¡®è®¤",
    onClick: () => console.log("å·²ç¡®è®¤"),
  },
  cancel: {
    label: "å–æ¶ˆ",
    onClick: () => console.log("å·²å–æ¶ˆ"),
  },
})
```

#### Promise çŠ¶æ€
```tsx
toast.promise(
  fetch('/api/data'),
  {
    loading: 'åŠ è½½ä¸­...',
    success: 'åŠ è½½æˆåŠŸï¼',
    error: 'åŠ è½½å¤±è´¥',
  }
)
```

#### è‡ªå®šä¹‰ä½ç½®
```tsx
toast("æ¶ˆæ¯", {
  position: "bottom-right", // top-left, top-center, top-right, bottom-left, bottom-center, bottom-right
})
```

---

## æ ·å¼å®šåˆ¶

### Toast ç±»å‹æ ·å¼

| ç±»å‹ | èƒŒæ™¯è‰² | æ–‡å­—è‰² | ç”¨é€” |
|-----|--------|--------|------|
| **é»˜è®¤** | `bg-background` | `text-foreground` | æ™®é€šä¿¡æ¯ |
| **æˆåŠŸ** | `bg-green-500` | `text-white` | æˆåŠŸæ“ä½œ |
| **é”™è¯¯** | `bg-destructive` | `text-destructive-foreground` | é”™è¯¯/å¤±è´¥ |
| **è­¦å‘Š** | `bg-yellow-500` | `text-white` | è­¦å‘Šä¿¡æ¯ |
| **ä¿¡æ¯** | `bg-blue-500` | `text-white` | æç¤ºä¿¡æ¯ |

### è‡ªé€‚åº”ä¸»é¢˜

Sonner è‡ªåŠ¨é€‚é…ç³»ç»Ÿä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²æ¨¡å¼ï¼‰ï¼š

```tsx
const { theme = 'system' } = useTheme()

<Sonner
  theme={theme as ToasterProps['theme']}
  // ...
/>
```

---

## ä½¿ç”¨ç¤ºä¾‹

### åœ¨è®¾è®¡é¡µé¢ä¸­ä½¿ç”¨

```tsx
// éªŒè¯å¤±è´¥
if (targetStage > 2 && !selectedWindowType) {
  toast.error("è¯·å…ˆç¡®å®šçª—å‹", {
    description: "è¯·åœ¨æ­¥éª¤2é€‰æ‹©ä¸€ä¸ªçª—å‹åå†ç»§ç»­",
  })
  return false
}

// ä¿å­˜æˆåŠŸ
const handleSave = () => {
  // ä¿å­˜é€»è¾‘
  toast.success("è®¾è®¡å·²ä¿å­˜", {
    description: "æ‚¨å¯ä»¥åœ¨"æˆ‘çš„è®¾è®¡"ä¸­æŸ¥çœ‹",
  })
}

// åŠ è½½ä¸­
const handleGenerate = async () => {
  const promise = generateDesign()
  
  toast.promise(promise, {
    loading: "æ­£åœ¨ç”Ÿæˆæ•ˆæœå›¾...",
    success: "æ•ˆæœå›¾ç”ŸæˆæˆåŠŸï¼",
    error: "ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•",
  })
}

// æ“ä½œç¡®è®¤
const handleDelete = () => {
  toast("ç¡®è®¤åˆ é™¤è¯¥è®¾è®¡å—ï¼Ÿ", {
    action: {
      label: "ç¡®è®¤",
      onClick: () => {
        // æ‰§è¡Œåˆ é™¤
        toast.success("å·²åˆ é™¤")
      },
    },
    cancel: {
      label: "å–æ¶ˆ",
    },
  })
}
```

---

## è§†è§‰æ•ˆæœ

### Toast æ˜¾ç¤ºä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              é¡¶éƒ¨å±…ä¸­                â”‚  â† top-center (é»˜è®¤)
â”‚                                     â”‚
â”‚                                     â”‚
â”‚         é¡µé¢å†…å®¹åŒºåŸŸ                 â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Toast æ ·å¼ç¤ºä¾‹

#### é”™è¯¯æç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ è¯·å…ˆç¡®å®šçª—å‹             â”‚  â† çº¢è‰²èƒŒæ™¯
â”‚ è¯·åœ¨æ­¥éª¤2é€‰æ‹©ä¸€ä¸ªçª—å‹åå†ç»§ç»­â”‚  â† æè¿°æ–‡å­—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æˆåŠŸæç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ä¿å­˜æˆåŠŸ                 â”‚  â† ç»¿è‰²èƒŒæ™¯
â”‚ æ‚¨å¯ä»¥åœ¨"æˆ‘çš„è®¾è®¡"ä¸­æŸ¥çœ‹    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å¸¦æ“ä½œæŒ‰é’®
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ ç¡®è®¤åˆ é™¤è¯¥è®¾è®¡å—ï¼Ÿ             â”‚  â† é»„è‰²èƒŒæ™¯
â”‚                                  â”‚
â”‚    [å–æ¶ˆ]        [ç¡®è®¤]          â”‚  â† æ“ä½œæŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é…ç½®è¯´æ˜

### å…¨å±€é…ç½®

åœ¨ `components/ui/sonner.tsx` ä¸­é…ç½®ï¼š

```tsx
<Sonner
  theme={theme}                 // ä¸»é¢˜ï¼šlight/dark/system
  position="top-center"         // é»˜è®¤ä½ç½®
  toastOptions={{
    classNames: {
      toast: '...',              // Toast å®¹å™¨æ ·å¼
      description: '...',        // æè¿°æ–‡å­—æ ·å¼
      actionButton: '...',       // æ“ä½œæŒ‰é’®æ ·å¼
      cancelButton: '...',       // å–æ¶ˆæŒ‰é’®æ ·å¼
      error: '...',              // é”™è¯¯æ ·å¼
      success: '...',            // æˆåŠŸæ ·å¼
      warning: '...',            // è­¦å‘Šæ ·å¼
      info: '...',               // ä¿¡æ¯æ ·å¼
    },
  }}
/>
```

### å•æ¬¡ä½¿ç”¨é…ç½®

```tsx
toast("æ¶ˆæ¯", {
  duration: 5000,              // æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  position: "top-center",      // ä½ç½®
  description: "æè¿°",         // æè¿°æ–‡å­—
  action: { /* ... */ },       // æ“ä½œæŒ‰é’®
  cancel: { /* ... */ },       // å–æ¶ˆæŒ‰é’®
  onDismiss: () => {},         // å…³é—­å›è°ƒ
  onAutoClose: () => {},       // è‡ªåŠ¨å…³é—­å›è°ƒ
})
```

---

## è¿ç§»æŒ‡å—

### ä»æ—§çš„ useToast è¿ç§»

#### 1. åˆ é™¤ useToast hook è°ƒç”¨

```tsx
// åˆ é™¤è¿™è¡Œ
const { toast } = useToast()
```

#### 2. å¯¼å…¥ toast å‡½æ•°

```tsx
import { toast } from "sonner"
```

#### 3. æ›´æ–° toast è°ƒç”¨

| æ—§ç”¨æ³• | æ–°ç”¨æ³• |
|--------|--------|
| `toast({ title, description, variant: "default" })` | `toast(title, { description })` |
| `toast({ title, description, variant: "destructive" })` | `toast.error(title, { description })` |
| `toast({ title, variant: "success" })` | `toast.success(title)` |

---

## ä¼˜åŠ¿å¯¹æ¯”

### å¯¹æ¯”è¡¨

| ç‰¹æ€§ | shadcn/ui Toast | Sonner |
|-----|----------------|--------|
| **API å¤æ‚åº¦** | éœ€è¦ useToast hook | ç›´æ¥è°ƒç”¨å‡½æ•° âœ… |
| **ä»£ç é‡** | è¾ƒå¤š | ç®€æ´ âœ… |
| **åŠ¨ç”»æ•ˆæœ** | åŸºç¡€ | æµç•…ä¼˜é›… âœ… |
| **å †å ç®¡ç†** | æ‰‹åŠ¨ | è‡ªåŠ¨ âœ… |
| **Promise æ”¯æŒ** | æ—  | æ”¯æŒ âœ… |
| **ä¸»é¢˜é€‚é…** | éœ€é…ç½® | è‡ªåŠ¨ âœ… |
| **æ€§èƒ½** | è‰¯å¥½ | ä¼˜ç§€ âœ… |

---

## æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•

1. **åŸºç¡€æç¤º**
   - [ ] æ˜¾ç¤ºæ™®é€šæ¶ˆæ¯
   - [ ] æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
   - [ ] æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   - [ ] æ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯
   - [ ] æ˜¾ç¤ºä¿¡æ¯æ¶ˆæ¯

2. **é«˜çº§åŠŸèƒ½**
   - [ ] å¸¦æè¿°çš„æç¤º
   - [ ] å¸¦æ“ä½œæŒ‰é’®çš„æç¤º
   - [ ] Promise çŠ¶æ€æç¤º
   - [ ] è‡ªå®šä¹‰æŒç»­æ—¶é—´

3. **äº¤äº’æµ‹è¯•**
   - [ ] è‡ªåŠ¨æ¶ˆå¤±
   - [ ] æ‰‹åŠ¨å…³é—­
   - [ ] ç‚¹å‡»æ“ä½œæŒ‰é’®
   - [ ] ç‚¹å‡»å–æ¶ˆæŒ‰é’®
   - [ ] å †å æ˜¾ç¤ºå¤šä¸ª Toast

4. **ä¸»é¢˜æµ‹è¯•**
   - [ ] äº®è‰²æ¨¡å¼æ˜¾ç¤ºæ­£å¸¸
   - [ ] æš—è‰²æ¨¡å¼æ˜¾ç¤ºæ­£å¸¸
   - [ ] ç³»ç»Ÿä¸»é¢˜åˆ‡æ¢æ­£å¸¸

5. **å“åº”å¼æµ‹è¯•**
   - [ ] æ¡Œé¢ç«¯æ˜¾ç¤ºæ­£å¸¸
   - [ ] å¹³æ¿ç«¯æ˜¾ç¤ºæ­£å¸¸
   - [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

---

## ç›¸å…³æ–‡æ¡£

- [Sonner å®˜æ–¹æ–‡æ¡£](https://sonner.emilkowal.ski/)
- [çª—å‹éªŒè¯åŠŸèƒ½](./WINDOW_TYPE_VALIDATION.md)

---

## æ€»ç»“

### å®ç°çš„æ”¹è¿›

âœ… **æ›´ç®€æ´çš„ API**ï¼šæ— éœ€ hookï¼Œç›´æ¥è°ƒç”¨  
âœ… **æ›´ç¾è§‚çš„æ ·å¼**ï¼šç°ä»£åŒ–è®¾è®¡ï¼Œæµç•…åŠ¨ç”»  
âœ… **æ›´å¥½çš„ä½“éªŒ**ï¼šè‡ªåŠ¨å †å ï¼Œæ™ºèƒ½ç®¡ç†  
âœ… **æ›´å¼ºçš„åŠŸèƒ½**ï¼šæ”¯æŒ Promiseã€æ“ä½œæŒ‰é’®ç­‰  

### ç”¨æˆ·ä»·å€¼

- ğŸ¯ æç¤ºæ›´æ¸…æ™°é†’ç›®
- ğŸ¯ äº¤äº’æ›´æµç•…è‡ªç„¶
- ğŸ¯ è§†è§‰æ›´ç°ä»£ç¾è§‚
- ğŸ¯ ä½¿ç”¨æ›´ç®€å•ç›´è§‚

### æŠ€æœ¯ä¼˜åŠ¿

- ğŸ’» ä»£ç æ›´ç®€æ´
- ğŸ’» ç»´æŠ¤æ›´å®¹æ˜“
- ğŸ’» æ€§èƒ½æ›´ä¼˜ç§€
- ğŸ’» åŠŸèƒ½æ›´ä¸°å¯Œ

---

**ç‰ˆæœ¬**: v2.5.6  
**æ›´æ–°å®Œæˆ** âœ“

