# 步骤条响应式优化更新

## 更新概述

优化步骤条显示，从圆形改为椭圆形，增加步骤名称，并实现智能响应式自适应布局。

## 更新时间

2025年11月6日

---

## 📝 主要变更

### 1. 步骤名称更新

将5个步骤的名称简化为更直观的动词短语：

| 步骤 | 旧名称 | 新名称 | 说明 |
|-----|--------|--------|------|
| 步骤1 | 基础选型 | **填信息** | 填写基础户型信息 |
| 步骤2 | 选择窗型 | **选窗型** | 选择合适的窗型结构 |
| 步骤3 | 窗型设计 | **调细节** | 调整窗型细节配置 |
| 步骤4 | 配置选择 | **换样式** | 更换材质和样式 |
| 步骤5 | 成果输出 | **看效果** | 查看报价和效果图 |

**优势**：
- ✅ 更简洁易记（3个字）
- ✅ 动词开头，行动导向
- ✅ 通俗易懂，降低认知负担

---

### 2. 样式变更：圆形 → 椭圆形

#### 旧样式（圆形）
```
⭕ 01  ⭕ 02  ⭕ 03  ⭕ 04  ⭕ 05
```
- 固定宽高：`w-9 h-9`
- 仅显示编号

#### 新样式（椭圆形）
```
━━━━━━━━  ━━━━━━━━  ━━━━━━━━  ━━━━━━━━  ━━━━━━━━
│01 填信息│ │02 选窗型│ │03 调细节│ │04 换样式│ │05 看效果│
━━━━━━━━  ━━━━━━━━  ━━━━━━━━  ━━━━━━━━  ━━━━━━━━
```
- 自适应宽度：`px-4`（有名称时）/ `w-9`（仅编号时）
- 高度保持：`h-9`（36px）
- 显示编号+名称

---

## 🎨 响应式设计策略

### 设计原则

1. **最小间距保证**：距离左右元素最小间距 40px
2. **渐进式降级**：根据屏幕宽度智能隐藏内容
3. **优先级排序**：
   - 当前步骤 > 其他步骤
   - 步骤编号 > 步骤名称
   - 核心功能 > 美观展示

### 响应式断点

#### 超大屏幕 (≥1280px, xl)
```
┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐
│01 填信息│──│02 选窗型│──│03 调细节│──│04 换样式│──│05 看效果│
└─────────┘  └─────────┘  └─────────┘  └─────────┘  └─────────┘
```
**显示**：所有步骤 + 所有名称  
**间距**：12px（`xl:w-12`）  
**内边距**：16px（`xl:px-4`）

---

#### 大屏幕 (≥1024px, lg)
```
┌───┐  ┌─────────┐  ┌───┐  ┌───┐  ┌───┐
│✓ │──│02 选窗型│──│03 │──│04 │──│05 │
└───┘  └─────────┘  └───┘  └───┘  └───┘
         (当前步骤)
```
**显示**：所有步骤 + 当前步骤名称  
**间距**：8px（`lg:w-8`）  
**内边距**：当前步骤 16px / 其他 12px（`lg:px-3`）

---

#### 中等屏幕 (≥768px, md)
```
┌───┐  ┌───┐  ┌───┐  ┌───┐  ┌───┐
│✓ │──│✓ │──│03 │──│04 │──│05 │
└───┘  └───┘  └───┘  └───┘  └───┘
               (当前)
```
**显示**：所有步骤编号（无名称）  
**间距**：6px（`w-6`）  
**宽度**：36px（`w-9`）

---

#### 小屏幕 (<768px, 移动端)
```
     ┌─────────┐
     │03 调细节│
     └─────────┘
      (仅当前步骤)
```
**显示**：仅当前步骤  
**宽度**：400px+ 显示名称，否则仅编号

---

### 自适应宽度策略

```css
/* 最大宽度限制，确保左右各留 160px 空间（包含40px间距） */
max-w-[calc(100%-320px)]

/* 响应式间距 */
gap-1.5 lg:gap-2  /* 6px → 8px */

/* 连接线宽度 */
w-6 lg:w-8 xl:w-12  /* 24px → 32px → 48px */

/* 内边距 */
xl:px-4           /* 16px - 显示所有名称 */
lg:px-3           /* 12px - 当前步骤名称 */
md:w-9 md:px-0    /* 36px - 仅编号，圆形 */
```

---

## 💻 实现细节

### HTML 结构

```tsx
<div className="hidden md:flex items-center gap-1.5 lg:gap-2 absolute left-1/2 -translate-x-1/2 max-w-[calc(100%-320px)]">
  {designStages.map((stage, index) => (
    <div key={stage.id} className="flex items-center">
      <button
        className={cn(
          "h-9 rounded-full flex items-center justify-center text-sm font-medium transition-all",
          "xl:px-4 lg:px-3",
          currentStage === stage.id ? "lg:px-4" : "md:w-9 md:px-0",
          // 状态样式...
        )}
      >
        <div className="flex items-center gap-2 whitespace-nowrap">
          {/* 编号/对勾 */}
          <span className="shrink-0">
            {currentStage > stage.id ? <Check className="h-4 w-4" /> : `0${index + 1}`}
          </span>
          
          {/* 名称 - 多级显示 */}
          <span className="hidden xl:inline">{stage.name}</span>
          {currentStage === stage.id && (
            <span className="hidden lg:inline xl:hidden">{stage.name}</span>
          )}
        </div>
      </button>
      
      {/* 连接线 */}
      {index < designStages.length - 1 && (
        <div className={cn(
          "h-[2px] transition-colors shrink-0",
          "w-6 lg:w-8 xl:w-12",
          currentStage > stage.id ? 'bg-primary' : 'bg-border'
        )} />
      )}
    </div>
  ))}
</div>
```

### 移动端单独处理

```tsx
<div className="md:hidden flex items-center absolute left-1/2 -translate-x-1/2 px-4">
  <div className={cn(
    "h-8 rounded-full flex items-center justify-center gap-1.5 text-xs font-medium transition-all",
    "px-3 sm:px-4",
    "bg-primary/20 text-primary border-2 border-primary"
  )}>
    <span className="shrink-0">0{currentStage}</span>
    <span className="hidden min-[400px]:inline whitespace-nowrap">
      {designStages[currentStage - 1]?.name}
    </span>
  </div>
</div>
```

---

## 🎯 关键 CSS 类说明

### 布局类
- `absolute left-1/2 -translate-x-1/2`：居中定位
- `max-w-[calc(100%-320px)]`：最大宽度限制
- `gap-1.5 lg:gap-2`：响应式间距

### 尺寸类
- `h-9`：高度 36px（保持不变）
- `xl:px-4 lg:px-3`：水平内边距
- `md:w-9 md:px-0`：中屏固定宽度

### 状态类
- `bg-primary text-primary-foreground`：已完成
- `bg-primary/20 text-primary border-2 border-primary`：当前步骤
- `bg-muted text-muted-foreground`：未开始

### 响应式显示
- `hidden xl:inline`：超大屏显示
- `hidden lg:inline xl:hidden`：大屏显示，超大屏隐藏
- `hidden min-[400px]:inline`：400px 以上显示

---

## 📊 视觉效果对比

### 超大屏幕效果
```
Logo  门窗设计工具    01填信息 ── 02选窗型 ── 03调细节 ── 04换样式 ── 05看效果    上一步  下一步
      填信息          ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                      (全部步骤+全部名称，完整显示)
```

### 大屏幕效果
```
Logo  门窗设计工具    ✓ ── 02选窗型 ── 03 ── 04 ── 05    上一步  下一步
      选窗型          ━━━━━━━━━━━━━━━━━━━━━━━━━
                      (仅当前步骤显示名称)
```

### 中等屏幕效果
```
Logo  门窗设计工具    ✓─✓─03─04─05    上一步  下一步
      选窗型          ━━━━━━━━━━━━
                      (仅显示编号)
```

### 移动端效果
```
Logo  门窗设计工具       02选窗型      上一步  下一步
      选窗型             ━━━━━
                         (仅当前)
```

---

## ✅ 优化效果

### 用户体验提升
1. **信息更清晰**
   - ✓ 步骤名称一目了然
   - ✓ 当前位置更明显
   - ✓ 进度一眼可见

2. **交互更友好**
   - ✓ 椭圆形更符合阅读习惯
   - ✓ 点击区域更大，易于操作
   - ✓ hover 状态清晰

3. **响应式更智能**
   - ✓ 自动适配各种屏幕
   - ✓ 渐进式降级合理
   - ✓ 移动端体验优化

### 技术优化
1. **性能**
   - ✓ 纯 CSS 实现，无 JS 计算
   - ✓ 使用 Tailwind 工具类
   - ✓ 过渡动画流畅

2. **可维护性**
   - ✓ 代码结构清晰
   - ✓ 注释完整
   - ✓ 易于扩展

3. **兼容性**
   - ✓ 支持主流浏览器
   - ✓ 移动端适配良好
   - ✓ 无需 polyfill

---

## 🧪 测试建议

### 响应式测试
1. **断点测试**
   - [ ] 超大屏 (1920px)：显示全部名称
   - [ ] 大屏 (1280px)：显示当前名称
   - [ ] 中屏 (1024px)：仅显示编号
   - [ ] 小屏 (768px)：显示当前步骤
   - [ ] 手机 (375px)：简化显示

2. **边界测试**
   - [ ] 1279px：从全名称切换到部分名称
   - [ ] 1023px：从部分名称切换到纯编号
   - [ ] 767px：从全部步骤切换到当前步骤
   - [ ] 399px：从名称切换到仅编号

3. **间距测试**
   - [ ] 左侧元素距步骤条 ≥40px
   - [ ] 右侧元素距步骤条 ≥40px
   - [ ] 步骤间连接线正常显示

### 交互测试
1. **点击测试**
   - [ ] 所有步骤可点击跳转
   - [ ] 当前步骤高亮正确
   - [ ] 已完成步骤显示对勾

2. **视觉测试**
   - [ ] 已完成：蓝色背景+白字
   - [ ] 当前步骤：浅蓝背景+蓝色边框
   - [ ] 未开始：灰色背景
   - [ ] hover 效果正常

3. **动画测试**
   - [ ] 步骤切换过渡流畅
   - [ ] 连接线颜色过渡平滑
   - [ ] 响应式切换无闪烁

---

## 📱 各设备显示效果

| 设备 | 屏幕宽度 | 步骤显示 | 名称显示 | 间距 |
|-----|---------|---------|---------|------|
| 大显示器 | 1920px+ | 全部5个 | 全部5个 | 12px |
| 笔记本 | 1280-1919px | 全部5个 | 当前1个 | 8px |
| iPad | 1024-1279px | 全部5个 | 无 | 8px |
| iPad 竖屏 | 768-1023px | 全部5个 | 无 | 6px |
| 手机横屏 | 640-767px | 当前1个 | 当前1个 | - |
| 手机竖屏 | <640px | 当前1个 | 400px+ 显示 | - |

---

## 🎉 更新总结

### 实现的功能
✅ 步骤名称简化（动词短语）  
✅ 圆形改为椭圆形  
✅ 高度保持 36px 不变  
✅ 智能响应式自适应  
✅ 左右最小间距 40px  
✅ 渐进式内容隐藏  
✅ 移动端优化  

### 用户价值
🎯 更清晰的步骤指引  
🎯 更好的视觉体验  
🎯 更流畅的交互反馈  
🎯 更完善的响应式适配  

### 技术价值
💻 代码结构优化  
💻 样式复用性提升  
💻 维护成本降低  
💻 扩展性增强  

---

## 📚 相关文档

- [5步骤流程更新](./STEP_FLOW_5_STEPS_UPDATE.md)
- [快速使用指南](./5_STEPS_QUICK_GUIDE.md)
- [测试清单](./TEST_CHECKLIST.md)

---

**版本**: v2.5.1  
**更新完成** ✓

