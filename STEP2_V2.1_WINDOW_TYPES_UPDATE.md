# Step2 v2.1 窗型列表完善文档

## 🎯 更新概述

根据标准门窗设计规范，将窗型列表从6种扩展到**12种标准窗型**，涵盖常用的所有矩形窗型分格样式。

---

## 📋 完整窗型列表

### 1️⃣ 001矩形1分格1
- **结构**：单个完整窗格
- **梃配置**：无梃
- **特点**：简洁、经济、适合小空间
- **适用场景**：小窗户、卫生间、储藏室

### 2️⃣ 002矩形2分格2
- **结构**：上下两格
- **梃配置**：1条横梃（中间位置 50%）
- **特点**：上下分隔、通风灵活
- **适用场景**：上下开启窗、通风窗

### 3️⃣ 003矩形2分格11
- **结构**：左右两格
- **梃配置**：1条竖梃（中间位置 50%）
- **特点**：左右分隔、经典推拉
- **适用场景**：推拉窗、阳台门窗

### 4️⃣ 004矩形3分格3
- **结构**：上中下三格
- **梃配置**：2条横梃（33.3%、66.6%）
- **特点**：三层分隔、通风好
- **适用场景**：高窗、多层通风

### 5️⃣ 005矩形3分格111
- **结构**：左中右三格
- **梃配置**：2条竖梃（33.3%、66.6%）
- **特点**：三扇推拉、大面积
- **适用场景**：大阳台、宽窗户

### 6️⃣ 006矩形3分格1/2
- **结构**：上1格，下2格
- **梃配置**：
  - 1条横梃（50%）
  - 1条竖梃（50%，仅下半部分）
- **特点**：上固定下开启、实用
- **适用场景**：上固定窗下推拉窗

### 7️⃣ 007矩形3分格2/1
- **结构**：上2格，下1格
- **梃配置**：
  - 1条横梃（50%）
  - 1条竖梃（50%，仅上半部分）
- **特点**：上开启下固定、常用
- **适用场景**：上平开窗下固定窗

### 8️⃣ 008矩形3分格12
- **结构**：左1格，右2格
- **梃配置**：
  - 1条竖梃（50%）
  - 1条横梃（50%，仅右半部分）
- **特点**：左大右小、灵活配置
- **适用场景**：非对称布局、主次分明

### 9️⃣ 009矩形3分格21
- **结构**：左2格，右1格
- **梃配置**：
  - 1条竖梃（50%）
  - 1条横梃（50%，仅左半部分）
- **特点**：左小右大、主次分明
- **适用场景**：非对称布局、特殊需求

### 🔟 010矩形4分格4
- **结构**：田字格，均分四格
- **梃配置**：
  - 1条横梃（50%）
  - 1条竖梃（50%）
- **特点**：均衡对称、经典款
- **适用场景**：标准四格窗、最常用

### 1️⃣1️⃣ 011矩形4分格2/1/1
- **结构**：上2格，中1格，下1格
- **梃配置**：
  - 2条横梃（33.3%、66.6%）
  - 1条竖梃（50%，仅上1/3部分）
- **特点**：上下层次、丰富
- **适用场景**：多层设计、特殊造型

### 1️⃣2️⃣ 012矩形4分格1/2/1
- **结构**：上1格，中2格，下1格
- **梃配置**：
  - 2条横梃（33.3%、66.6%）
  - 1条竖梃（50%，仅中间1/3部分）
- **特点**：中间开启、美观
- **适用场景**：中间推拉、上下固定

---

## 🔧 技术实现

### 梃配置数据结构

```typescript
interface MullionDefinition {
  type: 'vertical' | 'horizontal'
  ratio: number        // 位置比例（0-1）
  startRow?: number    // 起始行比例（可选，用于部分梃）
  endRow?: number      // 结束行比例（可选，用于部分梃）
  startCol?: number    // 起始列比例（可选，用于部分梃）
  endCol?: number      // 结束列比例（可选，用于部分梃）
}
```

### 示例：006矩形3分格1/2

```typescript
{
  id: "006",
  name: "006矩形3分格1/2",
  mullions: [
    { type: 'horizontal', ratio: 0.5 },              // 横梃在中间
    { type: 'vertical', ratio: 0.5, startRow: 0.5 }  // 竖梃仅在下半部分
  ]
}
```

### 基于框架尺寸生成

**核心逻辑**：
```typescript
// 根据 Step1 输入的宽高（canvasWidth, canvasHeight）
type.mullions.forEach((mullionDef) => {
  if (mullionDef.type === 'vertical') {
    newMullions.push({
      id: mullionId++,
      type: 'vertical',
      position: canvasWidth * mullionDef.ratio  // 按比例计算实际位置
    })
  } else {
    newMullions.push({
      id: mullionId++,
      type: 'horizontal',
      position: canvasHeight * mullionDef.ratio // 按比例计算实际位置
    })
  }
})
```

**示例**：
- Step1 输入：宽 2400mm，高 1800mm
- 选择窗型 003（左右两格）
- 系统自动生成：1条竖梃在位置 `2400 × 0.5 = 1200mm`
- 自动计算区域：
  - 区域1：`x=0, y=0, width=1200, height=1800`
  - 区域2：`x=1200, y=0, width=1200, height=1800`

---

## 🎨 视觉渲染改进

### 窗型选择器
- **布局**：响应式网格
  - 小屏：1列
  - 中屏：2-3列
  - 大屏：4列
- **卡片内容**：
  - 窗型结构图（根据梃配置动态渲染）
  - 窗型名称和编号
  - 简要描述
  - 特点标签

### 结构图渲染
```typescript
renderWindowStructure(type) {
  // 绘制外框
  // 绘制梃（支持部分梃）
  // 添加玻璃效果
}
```

**渲染特点**：
- 外框：灰色边框
- 梃：深灰色分隔条
- 玻璃：蓝色半透明渐变
- 部分梃：根据 startRow/endRow/startCol/endCol 限制长度

---

## 📊 窗型分类

### 按分格数量

| 分格数 | 窗型编号 | 数量 |
|--------|---------|------|
| 1格 | 001 | 1 |
| 2格 | 002, 003 | 2 |
| 3格 | 004, 005, 006, 007, 008, 009 | 6 |
| 4格 | 010, 011, 012 | 3 |

### 按梃类型

| 梃类型 | 窗型编号 | 说明 |
|--------|---------|------|
| 无梃 | 001 | 单格 |
| 仅横梃 | 002, 004 | 上下分隔 |
| 仅竖梃 | 003, 005 | 左右分隔 |
| 横竖梃（全长） | 010 | 田字格 |
| 横竖梃（部分） | 006, 007, 008, 009, 011, 012 | 复杂布局 |

---

## 🎮 使用流程

### 选择窗型
1. 进入 Step2
2. 浏览 12 种窗型
3. 查看结构图和描述
4. 点击选择

### 自动初始化
1. 系统读取窗型的 mullions 配置
2. 根据框架尺寸（Step1输入）计算梃的实际位置
3. 自动生成所有区域
4. 用户可继续添加/删除梃

---

## 🚀 优势特点

✅ **标准化**：涵盖所有常用矩形窗型  
✅ **灵活性**：基于比例配置，适应任意尺寸  
✅ **智能化**：自动计算区域，无需手动调整  
✅ **可视化**：结构图一目了然  
✅ **可扩展**：易于添加新窗型  

---

## 📝 后续计划

### v2.2 规划
- [ ] 添加更多复杂窗型（如不规则分格）
- [ ] 支持圆弧窗、异形窗
- [ ] 窗型收藏和推荐功能
- [ ] 自定义窗型保存
- [ ] 窗型搜索和筛选

---

## 📚 相关文档

- `STEP2_V2.0_BUSINESS_LOGIC_REFACTOR.md` - v2.0 业务逻辑重构
- `STEP2_V2.1_WINDOW_TYPES_UPDATE.md` - 本文档

---

**更新日期**：2024-10-31  
**版本**：v2.1  
**状态**：✅ 已完成  
**窗型数量**：12种

