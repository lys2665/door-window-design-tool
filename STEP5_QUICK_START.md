# 第五步"看效果"快速启动指南

## 立即开始使用

### 1. 启动应用

```bash
npm run dev
```

访问：`http://localhost:3000/design`

### 2. 进入第五步

1. 在首页点击"开始设计"
2. 完成**第1步：填信息**
3. 完成**第2步：选窗型**
4. 跳过或完成**第3步：调细节**
5. 跳过或完成**第4步：换样式**
6. 点击"下一步"进入**第5步：看效果**

---

## 功能概览

### 📊 详细报价单（左侧）

**自动计算价格**
- 根据窗户尺寸自动计算材料用量
- 实时汇总总价
- 透明的费用明细

**报价明细包含**
1. **型材费用** - 断桥铝型材（按周长计算）
2. **玻璃费用** - 双层中空玻璃（按面积计算）
3. **五金配件** - 执手、合页、锁具等
4. **纱网费用** - 金刚网纱窗（按面积计算）
5. **安装服务** - 测量、拆旧、安装

**服务承诺**
- ✅ 包安装
- ✅ 含运费
- ✅ 10年质保

**操作功能**
- 下载报价单（PDF）
- 打印报价单
- 分享报价单

### 🖼️ AI效果图生成（右侧）

**两种生成模式**

#### 模式1：场景融合（有现场照片）
1. 上传您的现场照片
2. AI自动识别门窗位置
3. 将设计方案融合到照片中
4. 生成逼真的安装效果预览

#### 模式2：渲染场景（无现场照片）
1. 直接生成渲染效果图
2. 展示真实场景效果
3. 专业的光影渲染

**效果图功能**
- 大图全屏展示
- 一键下载效果图
- 重新生成支持
- 带日期水印

---

## 操作步骤

### 场景1：有现场照片

#### Step 1: 上传照片
```
1. 点击效果图区域的"选择照片"按钮
2. 从文件选择器中选择现场照片
3. 照片自动显示在预览区
```

#### Step 2: AI识别
```
上传后自动开始识别
↓
显示识别动画（约2秒）
↓
标注检测到的窗户位置
↓
显示"AI已识别门窗位置"提示
```

#### Step 3: 场景融合
```
1. 点击"AI场景融合"按钮
2. 观察融合进度（0-100%）
3. 约2.5秒完成融合
4. Toast提示"场景融合完成"
5. 大图显示融合效果
```

#### Step 4: 下载效果图
```
1. 点击"下载效果图"按钮
2. 文件自动保存：门窗效果图_时间戳.jpg
```

### 场景2：无现场照片

#### Step 1: 生成渲染效果图
```
1. 直接点击"生成渲染效果图"按钮
2. 观察渲染进度（0-100%）
3. 约2秒完成渲染
4. Toast提示"效果图生成完成"
5. 显示渲染的真实场景
```

#### Step 2: 下载效果图
```
同上
```

---

## 界面布局

### 桌面端（> 1024px）

```
┌────────────────────────────────────────────────────────────┐
│  门窗设计工具         步骤指示器                           │
├──────────────────────┬─────────────────────────────────────┤
│                      │                                     │
│   详细报价单         │        效果图预览                   │
│   (左侧 384px)       │        (右侧 自适应)                │
│                      │                                     │
│  ┌─────────────────┐ │  ┌─────────────────────────────┐  │
│  │ 预估总价        │ │  │                             │  │
│  │ ¥8,500          │ │  │                             │  │
│  └─────────────────┘ │  │    效果图大图                │  │
│                      │  │                             │  │
│  ━━ 型材费用 ━━━━  │ │  │    或                        │  │
│  断桥铝型材          │ │  │                             │  │
│  ¥xxx               │ │  │    照片识别区                │  │
│                      │  │                             │  │
│  ━━ 玻璃费用 ━━━━  │ │  └─────────────────────────────┘  │
│  双层中空玻璃        │ │                                     │
│  ¥xxx               │ │  ┌─────────────────────────────┐  │
│                      │  │  [选择照片]                    │  │
│  ━━ 五金配件 ━━━━  │ │  │  [AI场景融合] [下载效果图]   │  │
│  执手/合页/锁具      │ │  └─────────────────────────────┘  │
│  ¥xxx               │ │                                     │
│                      │                                     │
│  [下载报价单]        │                                     │
│  [打印] [分享]       │                                     │
└──────────────────────┴─────────────────────────────────────┘
```

### 移动端（< 1024px）

```
┌────────────────────────────────────┐
│  门窗设计工具                      │
│  步骤指示器                        │
├────────────────────────────────────┤
│                                    │
│  详细报价单 (上方)                 │
│  最大高度 600px                    │
│                                    │
│  ┌───────────────────────────┐    │
│  │ 预估总价 ¥8,500            │    │
│  └───────────────────────────┘    │
│                                    │
│  型材费用、玻璃费用...            │
│                                    │
│  [下载报价单] [打印] [分享]       │
│                                    │
├────────────────────────────────────┤
│                                    │
│  效果图预览 (下方)                 │
│  最小高度 600px                    │
│                                    │
│  ┌───────────────────────────┐    │
│  │                            │    │
│  │    效果图显示区            │    │
│  │                            │    │
│  └───────────────────────────┘    │
│                                    │
│  [选择照片]                        │
│  [生成效果图] [下载]               │
│                                    │
└────────────────────────────────────┘
```

---

## 报价明细说明

### 型材费用

**计算方式**: 窗户周长 × 单价
```
周长 = (宽 + 高) × 2 ÷ 1000 (转换为米)
示例: (2400 + 1800) × 2 ÷ 1000 = 8.4米
单价: ¥280/米
总价: 8.4 × 280 = ¥2,352
```

### 玻璃费用

**计算方式**: 窗户面积 × 单价
```
面积 = 宽 × 高 ÷ 1,000,000 (转换为平方米)
示例: 2400 × 1800 ÷ 1,000,000 = 4.32㎡
单价: ¥480/㎡
总价: 4.32 × 480 = ¥2,074
```

### 五金配件

**固定价格**:
- 执手: ¥180/套 × 2套 = ¥360
- 合页: ¥45/套 × 4套 = ¥180
- 锁具: ¥220/套 × 1套 = ¥220

### 纱网费用

**计算方式**: 窗户面积 × 单价
```
面积: 4.32㎡
单价: ¥180/㎡
总价: 4.32 × 180 = ¥778
```

### 安装服务

**服务项目**:
- 上门测量: 免费
- 拆旧窗: ¥80/㎡ × 4.32㎡ = ¥346
- 安装费: ¥180/㎡ × 4.32㎡ = ¥778

---

## 常见问题

### Q: 报价是否准确？
A: 报价根据实际窗户尺寸自动计算，价格仅供参考。最终价格以实地测量和商家报价为准。

### Q: 可以修改报价吗？
A: 当前版本报价自动生成。如需修改，请返回前面步骤调整窗户尺寸或配置。

### Q: AI识别准确吗？
A: 当前是模拟识别演示。实际项目中需要接入真实AI识别服务。

### Q: 效果图是真实的吗？
A: 当前效果图为演示版本。实际项目中可接入3D渲染引擎生成更真实的效果。

### Q: 可以生成多张效果图吗？
A: 当前版本支持单张效果图。可点击"重新生成"刷新效果。

### Q: 下载的文件格式是什么？
A: 效果图下载为JPG格式。报价单下载为PDF格式（计划中）。

### Q: 可以分享到社交媒体吗？
A: 当前版本提供分享按钮（功能待完善）。可先下载再手动分享。

---

## 提示和技巧

### 提示1：拍摄现场照片
为了获得最佳效果，拍摄照片时请注意：
- 🌞 光线充足
- 📐 正面拍摄
- 🎯 门窗居中
- 🔍 清晰对焦

### 提示2：查看报价明细
点击每个费用项目可以查看：
- 详细规格说明
- 数量和单价
- 计算方式

### 提示3：下载保存
建议同时下载：
- 📄 报价单（用于预算）
- 🖼️ 效果图（用于参考）

### 提示4：对比查看
可以尝试：
1. 生成一次效果图
2. 返回修改配置
3. 重新生成对比

---

## 键盘快捷键

暂无快捷键，所有操作通过界面完成。

---

## 浏览器支持

### 推荐浏览器
- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

### 所需功能
- JavaScript启用
- 文件上传支持
- Canvas支持（用于图像处理）

---

## 性能说明

### 生成时间

| 操作 | 时间 | 说明 |
|------|------|------|
| 照片上传 | < 1秒 | 取决于文件大小 |
| AI识别 | 2秒 | 模拟识别时间 |
| 场景融合 | 2.5秒 | 模拟融合时间 |
| 渲染生成 | 2秒 | 模拟渲染时间 |
| 下载效果图 | < 1秒 | 即时下载 |

### 文件大小

- 上传照片建议 < 5MB
- 效果图文件约 1-2MB
- 报价单PDF约 100KB

---

## 故障排除

### 问题1：照片无法上传
**可能原因**:
- 文件格式不支持
- 文件过大

**解决方法**:
- 使用JPG、PNG格式
- 压缩图片到5MB以下

### 问题2：效果图显示异常
**可能原因**:
- 浏览器兼容性
- 网络问题

**解决方法**:
- 更换现代浏览器
- 检查网络连接
- 刷新页面重试

### 问题3：无法下载文件
**可能原因**:
- 浏览器阻止下载
- 权限不足

**解决方法**:
- 允许浏览器下载
- 检查文件夹权限

---

## 下一步

完成第5步后：
1. ✅ 查看完整报价单
2. ✅ 下载效果图留档
3. 📞 联系商家咨询
4. 📅 预约上门测量
5. 🛠️ 确认施工方案

---

## 技术支持

如遇问题，请检查：
1. 浏览器版本是否最新
2. JavaScript是否启用
3. 控制台是否有错误信息

---

**版本**: v5.0.0  
**更新时间**: 2025年11月6日  
**状态**: ✅ 功能完整，可正常使用

---

## 效果示例

### 示例1：客厅落地窗

```
窗户尺寸: 3000mm × 2400mm
预估总价: ¥12,800

包含:
- 断桥铝80系列
- 三层中空玻璃
- 带锁执手
- 金刚网纱窗
- 专业安装
```

### 示例2：卧室推拉窗

```
窗户尺寸: 2400mm × 1800mm
预估总价: ¥8,500

包含:
- 断桥铝70系列
- 双层中空玻璃
- 标准执手
- 金刚网纱窗
- 专业安装
```

---

**祝您设计愉快！** 🎨🪟✨


